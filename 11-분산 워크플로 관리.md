# 11. 분산 워크플로 관리
분산아키텍처는 통신, 일관성 조정 세가지 커플링 힘이 서로 영향을 미침
조정은 분산 아키텍처에서 도메인에 특정한 작업을 수행하고 그와 관련된 많은 부수적인 무넺를 처리하기 위해 둘 이상의 서비스를 조합하는것
오케스트레이션은 오케스트레이터를 사용
코레그래피는 오케스트레이터를 사용하지 않음

## 11.1 오케스트레이션 통신 스타일
오케스트레이션 패턴은 오케스트레이트(중재자mediator라고도함) 컴포넌트를 이용해서 워크플로 상태, 선택적 로직, 에러처리, 알림, 기타 워크플로 관리 기능을 관장합니다.
일반적으로 오케스트레이터는 워크플로를 중재하는 일 외에 다른 기능은 하지 않습니다. 

오케스트레이션은 '정상 경로' 하나만 있는게 아니라, 대체 경로와 에러조건까지 뒤섞인 복잡한 워크플로를 모델링 할 때 유용합니다. 

### 장점
중앙화 워크플로
 복잡도가 증가할수록 상태와 동작을 통합한 컴포넌트를 두는 게 유리합니다.
에러처리
  에러처리는 많은 도메인 워크플로에서 중요한 부분으로, 워크플로의 상태 오너를 별도로 두면 여러모로 유용합니다.
복원성
  워크플로 상태를 모니터링 하는 오케스트레이터가 있기 때문에 하나이상의 도메인 서비스가 잠깐 중단될 경우 재시도하는 로직을 추가할 수 있습니다.
상태관리
 오케스트레이터가 워크플로 상태를 항시 파악하므로 나머지 워크플로와 다른 전이 상태가 들어갈 자리가 생깁니다.

### 단점
응답성
 모든통신이 커쳐야 하는 오케스트레이터가 병목이 돼서 응답성이 저하될 수 있습니다. 
내고장성
 오케스트레이션으로 도메인 서비스의 복원성은 향상시킬 수 있지만, 오케스트레이터 자신이 워크플로의 단일 장애점이 될 가능성이 있습니다. 임 문제는 리던던시 로  해결할 수 있지만, 그만큼 더 복잡해 집니다. 
확장성
 코레오그래피보다 조정점이 더 많아서 비교적 확장이 잘 안되고 병렬성이 떨어집니다. 동적 커플링 패턴은 2장에서 살펴봤듯이 코레오그래피를 활용하므로 확장성이 더 우수합니다. 
서비스 커플링
 중앙에 오케스트레이터를 두면 이 오케스트레이터와 도메인 컴포넌트 간 커플링은 장가합니다. 물론 외료 이런 결합이 필요한 경우도 있습니다. 


## 11.2 코레오그래피 통신 스타일
의도적으로 중앙 조정을 하지 않는 통신 스타일
정상경로를 버어난 경계조건, 에러조건을 처리하는일은 쉽지 않음
정상경로는 단순해보였지만, 에러조건탓에 점점 복잡해 집니다. 이런 각각의 에러조건을 처리하기 위해 도메인 서비스들이 서로 인터랙션 할 수 밖에 없고 정상경로에서는 필요하지 않았던 통신 링크가 계속 늘어납니다. 


### 11.2.1 워크플로 상태 관리

## 11.3 오케스트레이션과 코레오그래피의 트레이드 오프
### 11.3.1 상태 오너 및 커플링

## 11.4 한빛가이버 사가: 워크플로 관리

